# Ralph Progress Log

This file tracks progress across iterations. It's automatically updated
after each iteration and included in agent prompts for context.

## Codebase Patterns (Study These First)

### Template Files
- Templates use Handlebars (.hbs) and are stored in the `templates/` directory
- Template variables should match StackConfig type structure (packageManager, linting, formatting, hasTypeScript, hasTests)
- Use conditional blocks (`{{#if variable}}...{{/if}}`) to include/exclude sections based on configuration
- Always add a comment at the top indicating the file was generated by bootsralph

### Generator Functions
- Generators are stored in `src/generators/` directory
- Each generator exports a main function (e.g., `generateLefthook`) that takes a StackConfig and optional outputDir
- Use `fileURLToPath(import.meta.url)` and `dirname()` to resolve template paths relative to the generator file
- Template path resolution should work in both dev (src/) and dist/ contexts using relative paths like `../../templates/`
- Always provide default values for optional properties when mapping to template variables
- Return the path to the generated file for easy verification

---

## [2026-01-19] - US-018
- Implemented lefthook.yml.hbs Handlebars template for generating pre-commit hooks
- Files changed: templates/lefthook.yml.hbs (new)
- **Learnings:**
  - Template includes conditional sections for: lockfile check, formatting, linting, typecheck, and tests
  - All hooks run in parallel for faster pre-commit performance
  - Skills-sync hook ensures OpenSkills skills stay in sync with package.json changes
  - Template variables map to StackConfig.tooling properties that will be passed by the generator
  - Handlebars conditional syntax allows clean inclusion/exclusion of hooks based on project configuration

---

## âœ“ Iteration 1 - US-018: Create lefthook template
*2026-01-19T12:30:06.838Z (420s)*

**Status:** Completed

**Notes:**
atting, hasTypeScript, hasTests)\n2. **Conditional sections** for each type of hook using `{{#if}}` blocks\n3. **Skills-sync hook** that runs `npx bootsralph sync --quiet` when package.json changes\n4. **Generated by bootsralph comment** at the top of the file\n5. **All quality checks passed** (typecheck, lint, format)\n\nThe template is ready to be used by the generator (US-019) which will read this template, compile it with Handlebars, and write the result to lefthook.yml in user projects.\n\n

---

## [2026-01-19] - US-019
- Implemented lefthook generator that renders the Handlebars template with stack config
- Files changed: src/generators/lefthook.ts (new)
- **Learnings:**
  - Generator reads template from templates/lefthook.yml.hbs using path resolution that works in both dev and dist contexts
  - StackConfig interface defines the expected structure with packageManager and tooling properties
  - Template variables are mapped from StackConfig.tooling (linting, formatting, hasTypeScript, hasTests) to Handlebars context
  - Uses fileURLToPath and dirname to resolve template path relative to the generator file in ESM context
  - Default values (false) are provided for optional tooling properties to ensure template renders correctly
  - Output is written to lefthook.yml in the specified directory (defaults to process.cwd())

---
