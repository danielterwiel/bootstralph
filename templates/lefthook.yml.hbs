# Generated by bootsralph
# Pre-commit hooks for code quality and consistency
# Docs: https://github.com/evilmartians/lefthook

pre-commit:
  parallel: true
  commands:
{{#if packageManager}}
    # Ensure lockfile is up to date
    lockfile-check:
      glob: "package.json"
      run: |
        if ! {{packageManager}} install --frozen-lockfile --dry-run > /dev/null 2>&1; then
          echo "⚠️  Lockfile is out of sync with package.json"
          echo "   Run '{{packageManager}} install' to update it"
          exit 1
        fi
{{/if}}

{{#if formatting}}
    # Format code
    format:
      glob: "*.{js,jsx,ts,tsx,json,md}"
      run: {{packageManager}} run format
{{/if}}

{{#if linting}}
    # Lint code
    lint:
      glob: "*.{js,jsx,ts,tsx}"
      run: {{packageManager}} run lint
{{/if}}

{{#if hasTypeScript}}
    # Type check
    typecheck:
      glob: "*.{ts,tsx}"
      run: {{packageManager}} run typecheck
{{/if}}

{{#if hasTests}}
    # Run tests (if they're fast enough for pre-commit)
    test:
      run: {{packageManager}} run test
{{/if}}

    # Sync skills based on package.json
    skills-sync:
      glob: "package.json"
      run: npx bootsralph sync --quiet
